---
layout: post
title: "Promiseé¢è¯•é¢˜"
categories: [Promise]
excerpt: æŒæ¡Promiseçš„ä½¿ç”¨
tags: [JSé¢è¯•é¢˜,Promise]
---
- ç›®å½•
{:toc #markdown-toc}
åšä¸€é“é¢è¯•é¢˜ï¼Œåˆ†æè¾“å‡ºç»“æœï¼š

```jsx
async function async1() {
	console.log("async1 start");
	await async2();
	console.log("async1 end");
}

async function async2() {
	console.log("async2");
}

console.log("script start");

setTimeout(function() {
	console.log("setTimeout");
}, 0);

async1();

new Promise(function(resolve) {
	console.log("promise1");
	resolve();
}).then(function() {
	console.log("promise2");
});

console.log("script end");
```

è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š

<aside>
ğŸ’¡

> script start
async1 start
async2
promise1
script end
async1 end
promise2
setTimeout
> 
</aside>

åˆ†æè¿‡ç¨‹ï¼š

        å…ˆæ‰§è¡ŒåŒæ­¥è„šæœ¬ï¼Œ**æ‰“å°â€script startâ€**ï¼ŒsetTimeout()æ˜¯å®ä»»åŠ¡ï¼Œæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾…ä¸‹ä¸€è½®Event Loopæ‰§è¡Œï¼Œè°ƒç”¨async1()ï¼š**æ‰“å°â€async1 startâ€**ï¼Œé‡åˆ°awaitï¼Œé˜»å¡è¿›ç¨‹æ‰§è¡Œasync2()ï¼Œ**æ‰“å°â€async2â€**ï¼Œawaitåé¢çš„è¯­å¥ç›¸å½“äºpromise().then()ä¸­çš„å›è°ƒå‡½æ•°ï¼Œconsole.log("async1 end")æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œä¸‹é¢çš„new Promise()ï¼Œ**æ‰“å°â€promise1â€**ï¼Œåé¢then()ä¸­æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç»§ç»­æ‰§è¡ŒåŒæ­¥è„šæœ¬ï¼Œ**æ‰“å°â€script endâ€**ï¼ŒåŒæ­¥è„šæœ¬æ‰§è¡Œå®Œæ¯•ï¼Œä¼˜å…ˆä¾æ¬¡æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œç„¶åå†æ‰§è¡Œä¸€æ¬¡å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰€ä»¥**ä¾æ¬¡æ‰“å°â€async1 endâ€â†’â€promise2â€â†’â€setTimeoutâ€**